<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIFF Starter</title>
    <link rel="stylesheet" href="./src/index.css">
</head>
<style>
    .hide {
        position: absolute;
        top: -1px;
        left: -1px;
        width: 1px;
        height: 1px;
    }
</style>

<body>
    <iframe name="hiddenFrame" class="hide"></iframe>
    <form method="post" id="form" target="hiddenFrame" action="/submit">

        <input type="text" id="userId" name="userId" hidden>
        <input type="text" id="displayName" name="displayName" hidden>
        <br>
        First name:<br>
        <input type="text" id="firstName" name="firstName" required>
        <br>
        Last name:<br>
        <input type="text" id="lastName" name="lastname" required>
        <br>
        Nickname : <br>
        <input type="text" id="nickName" name="nickName" required>
        <br><br>
        <input onclick="myFunction()" type="submit" />

    </form>

    <h2>Profile</h2>
    <table border="1">
        <tr>
            <th>Firstname</th>
            <td id="sh_first"></td>
        </tr>
        <tr>
            <th>Lastname</th>
            <td id="sh_last"></td>
        </tr>
        <tr>
            <th>Nickname</th>
            <td id="sh_nick"></td>
        </tr>
    </table>
    </div>


    <script src="https://d.line-scdn.net/liff/1.0/sdk.js"></script>
    <script>


        window.onload = function (e) {
            liff.init(function (data) {
                init(data);
            });
        };

        function init(data) {
            liff.getProfile().then(function (profile) {
                document.getElementById('userId').value = profile.userId;
                document.getElementById('displayName').value = profile.displayName;
            }).catch(function (error) {
                window.alert("Error getting profile: " + error);
            });
        }
        function myFunction() {
            var firstname = document.getElementById('firstName').value;
            var lastname = document.getElementById('lastName').value;
            var nickname = document.getElementById('nickName').value;
            if (firstname == "" || lastname == "" || nickname == "") {
                alert("Name must be filled out");
                return false;
            } else {
                alert("\n" + "save successfully");
            }
            document.getElementById('sh_first').textContent = firstname;
            document.getElementById('sh_last').textContent = lastname;
            document.getElementById('sh_nick').textContent = nickname;

        }   
    </script>


</body>

</html>